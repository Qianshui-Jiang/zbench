.version 4.1

.kernel "bmm_nchw_fp16"

/// VISA Predefined Variables
// .decl V0 v_type=G v_name=%null
// .decl V1 v_type=G v_name=%thread_x
// .decl V2 v_type=G v_name=%thread_y
// .decl V3 v_type=G v_name=%group_id_x
// .decl V4 v_type=G v_name=%group_id_y
// .decl V5 v_type=G v_name=%group_id_z
// .decl V6 v_type=G v_name=%tsc
// .decl V7 v_type=G v_name=%r0
// .decl V8 v_type=G v_name=%arg
// .decl V9 v_type=G v_name=%retval
// .decl V10 v_type=G v_name=%sp
// .decl V11 v_type=G v_name=%fp
// .decl V12 v_type=G v_name=%hw_id
// .decl V13 v_type=G v_name=%sr0
// .decl V14 v_type=G v_name=%cr0
// .decl V15 v_type=G v_name=%ce0
// .decl V16 v_type=G v_name=%dbg0
// .decl V17 v_type=G v_name=%color
// .decl V18 v_type=G v_name=%impl_arg_buf_ptr
// .decl V19 v_type=G v_name=%local_id_buf_ptr
// .decl V20 v_type=G v_name=%msg0
// .decl T0 v_type=T v_name=%slm
// .decl T1 v_type=T v_name=T1
// .decl T2 v_type=T v_name=T2
// .decl T3 v_type=T v_name=TSS
// .decl T4 v_type=T v_name=%bss
// .decl T5 v_type=T v_name=%scratch

.decl V32 v_type=G type=w num_elts=3 align=word
.decl V33 v_type=G type=d num_elts=3 align=dword
.decl V34 v_type=G type=q num_elts=1 align=qword
.decl V35 v_type=G type=d num_elts=3 align=dword
.decl V36 v_type=G type=d num_elts=1 align=dword
.decl V37 v_type=G type=d num_elts=1 align=dword
.decl V38 v_type=G type=d num_elts=1 align=dword
.decl V39 v_type=G type=hf num_elts=1 align=word
.decl V40 v_type=G type=hf num_elts=16 align=GRF
.decl V41 v_type=G type=d num_elts=1 align=GRF
.decl V42 v_type=G type=d num_elts=1 align=dword
.decl V43 v_type=G type=d num_elts=1 align=dword
.decl V44 v_type=G type=d num_elts=1 align=GRF
.decl V45 v_type=G type=hf num_elts=16 align=GRF
.decl V46 v_type=G type=d num_elts=1 align=GRF
.decl V47 v_type=G type=hf num_elts=16 align=GRF
.decl V48 v_type=G type=hf num_elts=16 align=GRF
.decl V49 v_type=G type=d num_elts=1 align=GRF
.decl V50 v_type=G type=d num_elts=1 align=GRF
.decl V51 v_type=G type=hf num_elts=16 align=GRF
.decl V52 v_type=G type=hf num_elts=16 align=GRF
.decl V53 v_type=G type=d num_elts=1 align=GRF
.decl V54 v_type=G type=d num_elts=1 align=GRF
.decl V55 v_type=G type=hf num_elts=16 align=GRF
.decl V56 v_type=G type=hf num_elts=16 align=GRF
.decl V57 v_type=G type=d num_elts=1 align=GRF
.decl V58 v_type=G type=d num_elts=1 align=GRF
.decl V59 v_type=G type=hf num_elts=16 align=GRF
.decl V60 v_type=G type=hf num_elts=16 align=GRF
.decl V61 v_type=G type=d num_elts=1 align=GRF
.decl V62 v_type=G type=d num_elts=1 align=GRF
.decl V63 v_type=G type=hf num_elts=16 align=GRF
.decl V64 v_type=G type=hf num_elts=16 align=GRF
.decl V65 v_type=G type=d num_elts=1 align=GRF
.decl V66 v_type=G type=d num_elts=1 align=GRF
.decl V67 v_type=G type=hf num_elts=16 align=GRF
.decl V68 v_type=G type=hf num_elts=16 align=GRF
.decl V69 v_type=G type=d num_elts=1 align=GRF
.decl V70 v_type=G type=d num_elts=1 align=GRF
.decl V71 v_type=G type=hf num_elts=16 align=GRF
.decl V72 v_type=G type=hf num_elts=16 align=GRF
.decl V73 v_type=G type=d num_elts=1 align=GRF
.decl V74 v_type=G type=d num_elts=1 align=GRF
.decl V75 v_type=G type=hf num_elts=16 align=GRF
.decl V76 v_type=G type=d num_elts=1 align=GRF
.decl V77 v_type=G type=d num_elts=1 alias=<V36, 0>
.decl V78 v_type=G type=d num_elts=3 alias=<V33, 0>
.decl V79 v_type=G type=uw num_elts=3 alias=<V32, 0>
.decl V80 v_type=G type=d num_elts=3 alias=<V35, 0>
.decl V81 v_type=G type=d num_elts=1 alias=<V37, 0>
.decl V82 v_type=G type=d num_elts=1 alias=<V38, 0>
.decl V83 v_type=G type=ud num_elts=1 alias=<V37, 0>
.decl V84 v_type=G type=ud num_elts=1 alias=<V41, 0>
.decl V85 v_type=G type=d num_elts=1 alias=<V43, 0>
.decl V86 v_type=G type=d num_elts=1 alias=<V42, 0>
.decl V87 v_type=G type=d num_elts=1 alias=<V44, 0>
.decl V88 v_type=G type=d num_elts=8 alias=<V45, 0>
.decl V89 v_type=G type=ud num_elts=1 alias=<V44, 0>
.decl V90 v_type=G type=d num_elts=8 alias=<V47, 0>
.decl V91 v_type=G type=ud num_elts=1 alias=<V46, 0>
.decl V92 v_type=G type=d num_elts=8 alias=<V48, 0>
.decl V93 v_type=G type=ud num_elts=1 alias=<V49, 0>
.decl V94 v_type=G type=d num_elts=8 alias=<V51, 0>
.decl V95 v_type=G type=ud num_elts=1 alias=<V50, 0>
.decl V96 v_type=G type=d num_elts=8 alias=<V52, 0>
.decl V97 v_type=G type=ud num_elts=1 alias=<V53, 0>
.decl V98 v_type=G type=d num_elts=8 alias=<V55, 0>
.decl V99 v_type=G type=ud num_elts=1 alias=<V54, 0>
.decl V100 v_type=G type=d num_elts=8 alias=<V56, 0>
.decl V101 v_type=G type=ud num_elts=1 alias=<V57, 0>
.decl V102 v_type=G type=d num_elts=8 alias=<V59, 0>
.decl V103 v_type=G type=ud num_elts=1 alias=<V58, 0>
.decl V104 v_type=G type=d num_elts=8 alias=<V60, 0>
.decl V105 v_type=G type=ud num_elts=1 alias=<V61, 0>
.decl V106 v_type=G type=d num_elts=8 alias=<V63, 0>
.decl V107 v_type=G type=ud num_elts=1 alias=<V62, 0>
.decl V108 v_type=G type=d num_elts=8 alias=<V64, 0>
.decl V109 v_type=G type=ud num_elts=1 alias=<V65, 0>
.decl V110 v_type=G type=d num_elts=8 alias=<V67, 0>
.decl V111 v_type=G type=ud num_elts=1 alias=<V66, 0>
.decl V112 v_type=G type=d num_elts=8 alias=<V68, 0>
.decl V113 v_type=G type=ud num_elts=1 alias=<V69, 0>
.decl V114 v_type=G type=d num_elts=8 alias=<V71, 0>
.decl V115 v_type=G type=ud num_elts=1 alias=<V70, 0>
.decl V116 v_type=G type=d num_elts=8 alias=<V72, 0>
.decl V117 v_type=G type=ud num_elts=1 alias=<V73, 0>
.decl V118 v_type=G type=d num_elts=8 alias=<V75, 0>
.decl V119 v_type=G type=ud num_elts=1 alias=<V74, 0>
.decl V120 v_type=G type=d num_elts=8 alias=<V40, 0>
.decl V121 v_type=G type=d num_elts=1 alias=<V76, 0>
.decl V122 v_type=G type=ud num_elts=1 alias=<V76, 0>
.decl P1 v_type=P num_elts=1
.decl P2 v_type=P num_elts=1
.decl T6 v_type=T num_elts=1 v_name=T6
.decl T7 v_type=T num_elts=1 v_name=T7
.decl T8 v_type=T num_elts=1 v_name=T8
.input T6 offset=88 size=4
.input T7 offset=96 size=4
.input T8 offset=104 size=4
.implicit_LOCAL_ID V32 offset=32 size=6
.implicit_LOCAL_SIZE V33 offset=64 size=12
.implicit_UNDEFINED_12 V34 offset=80 size=8
.kernel_attr SLMSize=0
.kernel_attr PerThreadInputSize=32
.kernel_attr Target="cm"
.kernel_attr SimdSize=16
.kernel_attr NoBarrier    

.function "bmm_nchw_fp16_BB_0"
bmm_nchw_fp16_BB_0:
    mov (M1, 1) V36(0,0)<1> %group_id_x(0,0)<0;1,0>                              /// $1
    mov (M1, 1) V37(0,0)<1> %group_id_y(0,0)<0;1,0>                              /// $2
    mul (M1, 1) V77(0,0)<1> V77(0,0)<0;1,0> V78(0,0)<0;1,0>                      /// $3
    mov (M1, 2) V35(0,0)<1> V79(0,0)<1;1,0>                                      /// $4
    add (M1, 1) V77(0,0)<1> V77(0,0)<0;1,0> V80(0,0)<0;1,0>                      /// $5
    mul (M1, 1) V81(0,0)<1> V81(0,0)<0;1,0> V78(0,1)<0;1,0>                      /// $6
    add (M1, 1) V81(0,0)<1> V81(0,0)<0;1,0> V80(0,1)<0;1,0>                      /// $7
    mul (M1, 1) V82(0,0)<1> V77(0,0)<0;1,0> 0x1c0:d                              /// $8
    cmp.gt (M1, 1) P1 V83(0,0)<0;1,0> 0x4:ud                                     /// $9
    (P1) jmp (M1, 1) BB_1                                                        /// $10
    shl (M1, 1) V84(0,0)<1> V83(0,0)<0;1,0> 0x5:ud                               /// $11
    mov (M1, 1) V39(0,0)<1> 0x0:hf                                               /// $12
    mov (M1, 16) V40(0,0)<1> V39(0,0)<0;1,0>                                     /// $13
    mov (M1, 1) V42(0,0)<1> 0x0:d                                                /// $14

BB_2:
    shl (M1, 1) V85(0,0)<1> V86(0,0)<0;1,0> 0x5:d                                /// $16
    add (M1, 1) V87(0,0)<1> V85(0,0)<0;1,0> V82(0,0)<0;1,0>                      /// $17
    lifetime.start V88                                                           /// $18
    lsc_load.ugm.ca.ca (M1, 1)  V88:d32x8t  bti(0x0)[V89]:a32                    /// $19
    lifetime.start V90                                                           /// $20
    lsc_load.ugm.ca.ca (M1, 1)  V90:d32x8t  bti(0x1)[V84]:a32                    /// $21
    add (M1, 1) V91(0,0)<1> V84(0,0)<0;1,0> 0x80:ud                              /// $22
    lifetime.start V92                                                           /// $23
    lsc_load.ugm.ca.ca (M1, 1)  V92:d32x8t  bti(0x1)[V91]:a32                    /// $24
    mad (M1, 16) V47(0,0)<1> V45(0,0)<0;1,0> V47(0,0)<1;1,0> V40(0,0)<1;1,0>     /// $25
    mad (M1, 16) V48(0,0)<1> V45(0,1)<0;1,0> V48(0,0)<1;1,0> V47(0,0)<1;1,0>     /// $26
    add (M1, 1) V93(0,0)<1> V84(0,0)<0;1,0> 0x100:ud                             /// $27
    lifetime.start V94                                                           /// $28
    lsc_load.ugm.ca.ca (M1, 1)  V94:d32x8t  bti(0x1)[V93]:a32                    /// $29
    add (M1, 1) V95(0,0)<1> V84(0,0)<0;1,0> 0x180:ud                             /// $30
    lifetime.start V96                                                           /// $31
    lsc_load.ugm.ca.ca (M1, 1)  V96:d32x8t  bti(0x1)[V95]:a32                    /// $32
    mad (M1, 16) V51(0,0)<1> V45(0,2)<0;1,0> V51(0,0)<1;1,0> V48(0,0)<1;1,0>     /// $33
    mad (M1, 16) V52(0,0)<1> V45(0,3)<0;1,0> V52(0,0)<1;1,0> V51(0,0)<1;1,0>     /// $34
    add (M1, 1) V97(0,0)<1> V84(0,0)<0;1,0> 0x200:ud                             /// $35
    lifetime.start V98                                                           /// $36
    lsc_load.ugm.ca.ca (M1, 1)  V98:d32x8t  bti(0x1)[V97]:a32                    /// $37
    add (M1, 1) V99(0,0)<1> V84(0,0)<0;1,0> 0x280:ud                             /// $38
    lifetime.start V100                                                          /// $39
    lsc_load.ugm.ca.ca (M1, 1)  V100:d32x8t  bti(0x1)[V99]:a32                   /// $40
    mad (M1, 16) V55(0,0)<1> V45(0,4)<0;1,0> V55(0,0)<1;1,0> V52(0,0)<1;1,0>     /// $41
    mad (M1, 16) V56(0,0)<1> V45(0,5)<0;1,0> V56(0,0)<1;1,0> V55(0,0)<1;1,0>     /// $42
    add (M1, 1) V101(0,0)<1> V84(0,0)<0;1,0> 0x300:ud                            /// $43
    lifetime.start V102                                                          /// $44
    lsc_load.ugm.ca.ca (M1, 1)  V102:d32x8t  bti(0x1)[V101]:a32                  /// $45
    add (M1, 1) V103(0,0)<1> V84(0,0)<0;1,0> 0x380:ud                            /// $46
    lifetime.start V104                                                          /// $47
    lsc_load.ugm.ca.ca (M1, 1)  V104:d32x8t  bti(0x1)[V103]:a32                  /// $48
    mad (M1, 16) V59(0,0)<1> V45(0,6)<0;1,0> V59(0,0)<1;1,0> V56(0,0)<1;1,0>     /// $49
    mad (M1, 16) V60(0,0)<1> V45(0,7)<0;1,0> V60(0,0)<1;1,0> V59(0,0)<1;1,0>     /// $50
    add (M1, 1) V105(0,0)<1> V84(0,0)<0;1,0> 0x400:ud                            /// $51
    lifetime.start V106                                                          /// $52
    lsc_load.ugm.ca.ca (M1, 1)  V106:d32x8t  bti(0x1)[V105]:a32                  /// $53
    add (M1, 1) V107(0,0)<1> V84(0,0)<0;1,0> 0x480:ud                            /// $54
    lifetime.start V108                                                          /// $55
    lsc_load.ugm.ca.ca (M1, 1)  V108:d32x8t  bti(0x1)[V107]:a32                  /// $56
    mad (M1, 16) V63(0,0)<1> V45(0,8)<0;1,0> V63(0,0)<1;1,0> V60(0,0)<1;1,0>     /// $57
    mad (M1, 16) V64(0,0)<1> V45(0,9)<0;1,0> V64(0,0)<1;1,0> V63(0,0)<1;1,0>     /// $58
    add (M1, 1) V109(0,0)<1> V84(0,0)<0;1,0> 0x500:ud                            /// $59
    lifetime.start V110                                                          /// $60
    lsc_load.ugm.ca.ca (M1, 1)  V110:d32x8t  bti(0x1)[V109]:a32                  /// $61
    add (M1, 1) V111(0,0)<1> V84(0,0)<0;1,0> 0x580:ud                            /// $62
    lifetime.start V112                                                          /// $63
    lsc_load.ugm.ca.ca (M1, 1)  V112:d32x8t  bti(0x1)[V111]:a32                  /// $64
    mad (M1, 16) V67(0,0)<1> V45(0,10)<0;1,0> V67(0,0)<1;1,0> V64(0,0)<1;1,0>    /// $65
    mad (M1, 16) V68(0,0)<1> V45(0,11)<0;1,0> V68(0,0)<1;1,0> V67(0,0)<1;1,0>    /// $66
    add (M1, 1) V113(0,0)<1> V84(0,0)<0;1,0> 0x600:ud                            /// $67
    lifetime.start V114                                                          /// $68
    lsc_load.ugm.ca.ca (M1, 1)  V114:d32x8t  bti(0x1)[V113]:a32                  /// $69
    add (M1, 1) V115(0,0)<1> V84(0,0)<0;1,0> 0x680:ud                            /// $70
    lifetime.start V116                                                          /// $71
    lsc_load.ugm.ca.ca (M1, 1)  V116:d32x8t  bti(0x1)[V115]:a32                  /// $72
    mad (M1, 16) V71(0,0)<1> V45(0,12)<0;1,0> V71(0,0)<1;1,0> V68(0,0)<1;1,0>    /// $73
    mad (M1, 16) V72(0,0)<1> V45(0,13)<0;1,0> V72(0,0)<1;1,0> V71(0,0)<1;1,0>    /// $74
    add (M1, 1) V117(0,0)<1> V84(0,0)<0;1,0> 0x700:ud                            /// $75
    lifetime.start V118                                                          /// $76
    lsc_load.ugm.ca.ca (M1, 1)  V118:d32x8t  bti(0x1)[V117]:a32                  /// $77
    add (M1, 1) V119(0,0)<1> V84(0,0)<0;1,0> 0x780:ud                            /// $78
    lifetime.start V120                                                          /// $79
    lsc_load.ugm.ca.ca (M1, 1)  V120:d32x8t  bti(0x1)[V119]:a32                  /// $80
    mad (M1, 16) V75(0,0)<1> V45(0,14)<0;1,0> V75(0,0)<1;1,0> V72(0,0)<1;1,0>    /// $81
    mad (M1, 16) V40(0,0)<1> V45(0,15)<0;1,0> V40(0,0)<1;1,0> V75(0,0)<1;1,0>    /// $82
    add (M1, 1) V84(0,0)<1> V84(0,0)<0;1,0> 0x800:ud                             /// $83
    add (M1, 1) V86(0,0)<1> V86(0,0)<0;1,0> 0x1:d                                /// $84
    cmp.eq (M1, 1) P2 V86(0,0)<0;1,0> 0xe:d                                      /// $85
    (!P2) jmp (M1, 1) BB_2                                                       /// $86
    shl (M1, 1) V83(0,0)<1> V83(0,0)<0;1,0> 0x4:ud                               /// $87
    shl (M1, 1) V77(0,0)<1> V77(0,0)<0;1,0> 0x6:d                                /// $88
    add (M1, 1) V81(0,0)<1> V81(0,0)<0;1,0> V77(0,0)<0;1,0>                      /// $89
    shl (M1, 1) V121(0,0)<1> V81(0,0)<0;1,0> 0x1:d                               /// $90
    lsc_store.ugm.wb.wb (M1, 1)  bti(0x2)[V122]:a32  V120:d32x8t                 /// $91

BB_1:
    ret (M1, 1)                                                                  /// $93

//Platform: DG2
//Build option: "-abiver 2 -printregusage -TotalGRFNum 256 -output -binary -dumpcommonisa -enableHalfLSC -hasNoInt64Add -fusedCallWA 1 -LSCFenceWA "